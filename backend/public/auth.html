<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<style>
  body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#f4f6f8;
    font-family:Arial;
  }
  .auth-box{
    width:360px;
    background:#fff;
    padding:25px;
    border-radius:10px;
    box-shadow:0 10px 25px rgba(0,0,0,.15);
  }
  h2{text-align:center;margin-bottom:15px}
  input{
    width:100%;
    padding:10px;
    margin:8px 0;
    border:1px solid #ccc;
    border-radius:6px;
  }
  button{
    width:100%;
    padding:10px;
    margin-top:10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    color:white;
    font-size:15px;
  }
  .login{background:#28a745}
  .register{background:#007bff}
  .note{
    text-align:center;
    font-size:12px;
    margin-top:10px;
    color:#666;
  }
</style>
</head>

<body>
<div class="auth-box">
  <h2>User / Admin Login</h2>

  <!-- KEEP YOUR EXISTING IDS -->
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">

  <!-- KEEP EXISTING onclick -->
  <button class="login" onclick="login()">Login</button>
  <button class="register" onclick="register()">Create Account</button>

  
<script>
<!-- YOUR EXISTING SCRIPT STAYS -->

  // Attach button events
  document.getElementById("loginBtn").onclick = login;
  document.getElementById("registerBtn").onclick = registerUser;

  // LOGIN
  function login() {
    fetch("http://localhost:5000/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      credentials: "include",
      body: JSON.stringify({
        email: document.getElementById("email").value,
        password: document.getElementById("password").value
      })
    })
    .then(res => res.json())
    .then(data => {
      if (data.msg === "user") {
        // ðŸ‘¤ normal user
        window.location.href = "index.html";
      } else if (data.msg === "admin") {
        // ðŸ›  admin
        window.location.href = "admin.html";
      } else {
        alert("Invalid email or password");
      }
    })
    .catch(err => {
      console.error(err);
      alert("Server error");
    });
  }

  // REGISTER
  function registerUser() {
    fetch("http://localhost:5000/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      credentials: "include",
      body: JSON.stringify({
        email: document.getElementById("email").value,
        password: document.getElementById("password").value
      })
    })
    .then(res => res.json())
    .then(data => {
      if (data.msg === "registered") {
        alert("Account created. You can login now.");
      } else if (data.msg === "exists") {
        alert("User already exists");
      } else {
        alert("Registration error");
      }
    })
    .catch(err => {
      console.error(err);
      alert("Server error");
    });
  }
</script>
<script src="auth.js"></script>
</body>
</html>
